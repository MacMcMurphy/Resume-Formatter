<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Resume Formatter â€“ Setup</title>
	<style>
		body { font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; }
		.container { max-width: 560px; margin: 0 auto; }
		footer { margin-top: 32px; color: #666; font-size: 12px; }
		input[type="password"] { width:100%; padding:8px; border:1px solid #ccc; }
		button { padding:8px 12px; }
	</style>
</head>
<body>
	<div class="container">
		<h1>Welcome to Resume Formatter</h1>
		<p>Enter your OpenAI API key to get started. You can find or create a key in your OpenAI account settings.</p>
		<label style="display:block; margin:12px 0 8px;">OpenAI API Key</label>
		<input type="password" id="apiKey" placeholder="sk-..." />
		<div style="margin-top:12px;">
			<button id="saveBtn" type="button">Save and continue</button>
		</div>
		<footer>Version {{ version }}</footer>
	</div>
	<script>
	const saveBtn = document.getElementById('saveBtn');
	saveBtn.addEventListener('click', async ()=>{
		const input = document.getElementById('apiKey');
		const apiKey = (input.value || '').trim();
		if (!apiKey){ alert('Please paste your OpenAI API key.'); return; }
		try {
			const res = await fetch('/api/openai_key', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ api_key: apiKey }) });
			if (!res.ok){
				const err = await res.json().catch(()=>({}));
				alert('Failed to save key: ' + (err.detail || res.statusText));
				return;
			}
			window.location.href = '/';
		} catch {
			alert('Network error while saving key.');
		}
	});
	</script>
</body>
</html>


